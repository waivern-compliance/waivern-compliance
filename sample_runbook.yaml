name: "Sample Runbook"
description: "Analyse a file for potentially sensitive information"

connectors:
  - name: "file_reader"
    type: "file_reader"
    properties:
      path: "./sample_file.txt"
  - name: my_mysql_db
    type: mysql
    properties:
      # MySQL credentials are loaded from environment variables:
      # MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE, MYSQL_PORT
      # You can also specify them here, but environment variables take precedence
      max_rows_per_table: 5

plugins:
  - name: "file_content_analyser"
    type: "file_content_analyser"
    properties:
      sensitivity_level: "medium"
    metadata:
      priority: "high"
      compliance_frameworks: ["GDPR", "CCPA"]
  - name: "personal_data_analyser_for_file_content"
    type: "personal_data_analyser"
    properties:
      evidence_context_size: full
      enable_llm_validation: true
      llm_batch_size: 50
      llm_validation_mode: standard
    metadata:
      compliance_frameworks: ["GDPR", "CCPA"]
  - name: "personal_data_analyser_for_mysql"
    type: "personal_data_analyser"
    properties:
      evidence_context_size: full
      enable_llm_validation: false
      llm_batch_size: 80
      llm_validation_mode: conservative  # More careful validation for database content
    metadata:
      compliance_frameworks: ["GDPR", "CCPA"]

execution:
  - connector: "file_reader"
    plugin: "file_content_analyser"
    input_schema_name: "text"
    output_schema_name: "file_content_analysis_result"
    context:
      description: "Analyze file content for sensitive information"
      priority: "high"
      compliance_frameworks: ["GDPR", "CCPA"]
      sensitivity_rules:
        - "email_detection"
        - "password_detection"
        - "api_key_detection"
  - connector: "file_reader"
    plugin: "personal_data_analyser_for_file_content"
    input_schema_name: "text"
    output_schema_name: "personal_data_analysis_findings"
    context:
      description: "Analyze file content for personal data"
      priority: "high"
      compliance_frameworks: ["GDPR", "CCPA"]
  - connector: "my_mysql_db"
    plugin: "personal_data_analyser_for_mysql"
    input_schema_name: "text"
    output_schema_name: "personal_data_analysis_findings"
    context:
      description: "Analyse MySQL database for personal data"
      priority: "high"
      compliance_frameworks: ["GDPR", "CCPA"]

name: "Data Subject Analysis with LLM Validation"
description: >
  Test runbook for DataSubjectAnalyser with LLM validation enabled.
  Uses SQLite database for easy local testing.
contact: "Test <test@example.com>"
artifacts:
  # Source: SQLite test database
  sqlite_data:
    name: "SQLite Database Content"
    description: "Extract data from SQLite compliance test database"
    source:
      type: "sqlite"
      properties:
        database_path: "./apps/wct/tests/integration/test_data/sqlite_compliance_test.db"
        max_rows_per_table: 10

  # Data Subject Detection with LLM Validation
  data_subject_indicators:
    name: "Data Subject Detection with LLM Validation"
    description: "Detect data subject categories with LLM-based false positive filtering"
    inputs: sqlite_data
    process:
      type: "data_subject"
      properties:
        pattern_matching:
          ruleset: "local/data_subject_indicator/1.0.0"
          evidence_context_size: "medium"
          maximum_evidence_count: 3
        llm_validation:
          enable_llm_validation: false
          llm_batch_size: 50
          llm_validation_mode: "standard"
          sampling_size: 3
    output: true

  # GDPR Classification
  gdpr_data_subject:
    name: "GDPR Data Subject Classification"
    description: "Classify data subjects according to GDPR Article 30(1)(c)"
    inputs: data_subject_indicators
    process:
      type: "gdpr_data_subject_classifier"
    output: true
